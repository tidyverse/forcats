<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>forcats 0.1.0 • forcats</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="../../tidyverse.css" rel="stylesheet">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- tidyverse --><link href="../../pkgdown.css" rel="stylesheet">
<script src="../../jquery.sticky-kit.min.js"></script><script src="../../pkgdown.js"></script><!-- mathjax --><script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-vignette">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <div class="navbar-brand-container">
        <a class="navbar-brand" href="../../index.html">forcats</a>
        <small class="tidyverse">part of the <a href="http://tidyverse.org">tidyverse</a></small>
      </div>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav navbar-right">
<li>
  <a href="../../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    News
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li class="dropdown-header">Release notes</li>
    <li>
      <a href="../../articles/releases/forcats-0.2.0.html">Version 0.2.0</a>
    </li>
    <li>
      <a href="../../articles/releases/forcats-0.1.0.html">Version 0.1.0</a>
    </li>
    <li class="divider">
    <li>
      <a href="../../news/index.html">Change log</a>
    </li>
  </ul>
</li>
        <li>
  <a href="https://github.com/tidyverse/forcats">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9">
    <div class="page-header toc-ignore">
      <h1>forcats 0.1.0</h1>
            
          </div>

    
    
<div class="contents">
<p>I’m excited to announce <strong>forcats</strong>, a new package <strong>for</strong> <strong>cat</strong>egorical variable<strong>s</strong>, or factors. Factors have a bad rap in R because they often turn up when you don’t want them. That’s because historically, factors were more convenient than character vectors, as discussed in <a href="http://simplystatistics.org/2015/07/24/stringsasfactors-an-unauthorized-biography/"><em>stringsAsFactors: An unauthorized biography</em></a> by Roger Peng, and <a href="http://notstatschat.tumblr.com/post/124987394001/stringsasfactors-sigh"><em>stringsAsFactors = &lt;sigh&gt;</em></a> by Thomas Lumley.</p>
<p>If you use packages from the tidyverse (like <a href="http://r4ds.had.co.nz/tibbles.html">tibble</a> and <a href="http://r4ds.had.co.nz/data-import.html">readr</a>) you don’t need to worry about getting factors when you don’t want them. But factors are a useful data structure in their own right, particularly for modelling and visualisation, because they allow you to control the order of the levels. Working with factors in base R can be a little frustrating because of a handful of missing tools. The goal of forcats is to fill in those missing pieces so you can access the power of factors with a minimum of pain.</p>
<p>Install forcats with:</p>
<pre class="sourceCode r" id="cb1"><code class="sourceCode r"><div class="sourceLine" id="cb1-1" data-line-number="1">
<span class="kw">install.packages</span>(<span class="st">"forcats"</span>)</div></code></pre>
<p>forcats provides two main types of tools to change either the <strong>values</strong> or the <strong>order</strong> of the levels. I’ll call out some of the most important functions below, using using the included <code>gss_cat</code> dataset which contains a selection of categorical variables from the <a href="http://gss.norc.org">General Social Survey</a>.</p>
<pre class="sourceCode r" id="cb2"><code class="sourceCode r"><div class="sourceLine" id="cb2-1" data-line-number="1">
<span class="kw">library</span>(dplyr)</div>
<div class="sourceLine" id="cb2-2" data-line-number="2">
<span class="kw">library</span>(ggplot2)</div>
<div class="sourceLine" id="cb2-3" data-line-number="3">
<span class="kw">library</span>(forcats)</div>
<div class="sourceLine" id="cb2-4" data-line-number="4"></div>
<div class="sourceLine" id="cb2-5" data-line-number="5">gss_cat</div>
<div class="sourceLine" id="cb2-6" data-line-number="6"><span class="co">#&gt; # A tibble: 21,483 x 9</span></div>
<div class="sourceLine" id="cb2-7" data-line-number="7"><span class="co">#&gt;    year marital         age race  rincome  partyid   relig  denom  tvhours</span></div>
<div class="sourceLine" id="cb2-8" data-line-number="8"><span class="co">#&gt;   &lt;int&gt; &lt;fct&gt;         &lt;int&gt; &lt;fct&gt; &lt;fct&gt;    &lt;fct&gt;     &lt;fct&gt;  &lt;fct&gt;    &lt;int&gt;</span></div>
<div class="sourceLine" id="cb2-9" data-line-number="9"><span class="co">#&gt; 1  2000 Never married    26 White $8000 t… Ind,near… Prote… South…      12</span></div>
<div class="sourceLine" id="cb2-10" data-line-number="10"><span class="co">#&gt; 2  2000 Divorced         48 White $8000 t… Not str … Prote… Bapti…      NA</span></div>
<div class="sourceLine" id="cb2-11" data-line-number="11"><span class="co">#&gt; 3  2000 Widowed          67 White Not app… Independ… Prote… No de…       2</span></div>
<div class="sourceLine" id="cb2-12" data-line-number="12"><span class="co">#&gt; 4  2000 Never married    39 White Not app… Ind,near… Ortho… Not a…       4</span></div>
<div class="sourceLine" id="cb2-13" data-line-number="13"><span class="co">#&gt; 5  2000 Divorced         25 White Not app… Not str … None   Not a…       1</span></div>
<div class="sourceLine" id="cb2-14" data-line-number="14"><span class="co">#&gt; 6  2000 Married          25 White $20000 … Strong d… Prote… South…      NA</span></div>
<div class="sourceLine" id="cb2-15" data-line-number="15"><span class="co">#&gt; # ... with 2.148e+04 more rows</span></div></code></pre>
<div id="change-level-values" class="section level2">
<h2 class="hasAnchor">
<a href="#change-level-values" class="anchor"></a>Change level values</h2>
<p>You can recode specified factor levels with <a href="https://hadley.github.io/forcats/fct_recode.html"><code><a href="../../reference/fct_recode.html">fct_recode()</a></code></a>:</p>
<pre class="sourceCode r" id="cb3"><code class="sourceCode r"><div class="sourceLine" id="cb3-1" data-line-number="1">gss_cat <span class="op">%&gt;%</span><span class="st"> </span><span class="kw"><a href="http://dplyr.tidyverse.org/reference/tally.html">count</a></span>(partyid)</div>
<div class="sourceLine" id="cb3-2" data-line-number="2"><span class="co">#&gt; # A tibble: 10 x 2</span></div>
<div class="sourceLine" id="cb3-3" data-line-number="3"><span class="co">#&gt;   partyid                n</span></div>
<div class="sourceLine" id="cb3-4" data-line-number="4"><span class="co">#&gt;   &lt;fct&gt;              &lt;int&gt;</span></div>
<div class="sourceLine" id="cb3-5" data-line-number="5"><span class="co">#&gt; 1 No answer            154</span></div>
<div class="sourceLine" id="cb3-6" data-line-number="6"><span class="co">#&gt; 2 Don't know             1</span></div>
<div class="sourceLine" id="cb3-7" data-line-number="7"><span class="co">#&gt; 3 Other party          393</span></div>
<div class="sourceLine" id="cb3-8" data-line-number="8"><span class="co">#&gt; 4 Strong republican   2314</span></div>
<div class="sourceLine" id="cb3-9" data-line-number="9"><span class="co">#&gt; 5 Not str republican  3032</span></div>
<div class="sourceLine" id="cb3-10" data-line-number="10"><span class="co">#&gt; 6 Ind,near rep        1791</span></div>
<div class="sourceLine" id="cb3-11" data-line-number="11"><span class="co">#&gt; # ... with 4 more rows</span></div>
<div class="sourceLine" id="cb3-12" data-line-number="12"></div>
<div class="sourceLine" id="cb3-13" data-line-number="13">gss_cat <span class="op">%&gt;%</span>
</div>
<div class="sourceLine" id="cb3-14" data-line-number="14">
<span class="st">  </span><span class="kw"><a href="http://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span>(<span class="dt">partyid =</span> <span class="kw"><a href="../../reference/fct_recode.html">fct_recode</a></span>(partyid,</div>
<div class="sourceLine" id="cb3-15" data-line-number="15">    <span class="st">"Republican, strong"</span>    =<span class="st"> "Strong republican"</span>,</div>
<div class="sourceLine" id="cb3-16" data-line-number="16">    <span class="st">"Republican, weak"</span>      =<span class="st"> "Not str republican"</span>,</div>
<div class="sourceLine" id="cb3-17" data-line-number="17">    <span class="st">"Independent, near rep"</span> =<span class="st"> "Ind,near rep"</span>,</div>
<div class="sourceLine" id="cb3-18" data-line-number="18">    <span class="st">"Independent, near dem"</span> =<span class="st"> "Ind,near dem"</span>,</div>
<div class="sourceLine" id="cb3-19" data-line-number="19">    <span class="st">"Democrat, weak"</span>        =<span class="st"> "Not str democrat"</span>,</div>
<div class="sourceLine" id="cb3-20" data-line-number="20">    <span class="st">"Democrat, strong"</span>      =<span class="st"> "Strong democrat"</span>
</div>
<div class="sourceLine" id="cb3-21" data-line-number="21">  )) <span class="op">%&gt;%</span>
</div>
<div class="sourceLine" id="cb3-22" data-line-number="22">
<span class="st">  </span><span class="kw"><a href="http://dplyr.tidyverse.org/reference/tally.html">count</a></span>(partyid)</div>
<div class="sourceLine" id="cb3-23" data-line-number="23"><span class="co">#&gt; # A tibble: 10 x 2</span></div>
<div class="sourceLine" id="cb3-24" data-line-number="24"><span class="co">#&gt;   partyid                   n</span></div>
<div class="sourceLine" id="cb3-25" data-line-number="25"><span class="co">#&gt;   &lt;fct&gt;                 &lt;int&gt;</span></div>
<div class="sourceLine" id="cb3-26" data-line-number="26"><span class="co">#&gt; 1 No answer               154</span></div>
<div class="sourceLine" id="cb3-27" data-line-number="27"><span class="co">#&gt; 2 Don't know                1</span></div>
<div class="sourceLine" id="cb3-28" data-line-number="28"><span class="co">#&gt; 3 Other party             393</span></div>
<div class="sourceLine" id="cb3-29" data-line-number="29"><span class="co">#&gt; 4 Republican, strong     2314</span></div>
<div class="sourceLine" id="cb3-30" data-line-number="30"><span class="co">#&gt; 5 Republican, weak       3032</span></div>
<div class="sourceLine" id="cb3-31" data-line-number="31"><span class="co">#&gt; 6 Independent, near rep  1791</span></div>
<div class="sourceLine" id="cb3-32" data-line-number="32"><span class="co">#&gt; # ... with 4 more rows</span></div></code></pre>
<p>Note that unmentioned levels are left as is, and the order of the levels is preserved.</p>
<p><a href="https://hadley.github.io/forcats/fct_relump.html"><code><a href="../../reference/fct_lump.html">fct_lump()</a></code></a> allows you to lump the rarest (or most common) levels in to a new “other” level. The default behaviour is to collapse the smallest levels in to other, ensuring that it’s still the smallest level. For the religion variable that tells us that Protestants out number all other religions, which is interesting, but we probably want more level.</p>
<pre class="sourceCode r" id="cb4"><code class="sourceCode r"><div class="sourceLine" id="cb4-1" data-line-number="1">gss_cat <span class="op">%&gt;%</span><span class="st"> </span>
</div>
<div class="sourceLine" id="cb4-2" data-line-number="2">
<span class="st">  </span><span class="kw"><a href="http://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span>(<span class="dt">relig =</span> <span class="kw"><a href="../../reference/fct_lump.html">fct_lump</a></span>(relig)) <span class="op">%&gt;%</span><span class="st"> </span>
</div>
<div class="sourceLine" id="cb4-3" data-line-number="3">
<span class="st">  </span><span class="kw"><a href="http://dplyr.tidyverse.org/reference/tally.html">count</a></span>(relig)</div>
<div class="sourceLine" id="cb4-4" data-line-number="4"><span class="co">#&gt; # A tibble: 2 x 2</span></div>
<div class="sourceLine" id="cb4-5" data-line-number="5"><span class="co">#&gt;   relig          n</span></div>
<div class="sourceLine" id="cb4-6" data-line-number="6"><span class="co">#&gt;   &lt;fct&gt;      &lt;int&gt;</span></div>
<div class="sourceLine" id="cb4-7" data-line-number="7"><span class="co">#&gt; 1 Protestant 10846</span></div>
<div class="sourceLine" id="cb4-8" data-line-number="8"><span class="co">#&gt; 2 Other      10637</span></div></code></pre>
<p>Alternatively you can supply a number of levels to keep, <code>n</code>, or minimum proportion for inclusion, <code>prop</code>. If you use negative values, <code><a href="../../reference/fct_lump.html">fct_lump()</a></code> will change direction, and combine the most common values while preserving the rarest.</p>
<pre class="sourceCode r" id="cb5"><code class="sourceCode r"><div class="sourceLine" id="cb5-1" data-line-number="1">gss_cat <span class="op">%&gt;%</span><span class="st"> </span>
</div>
<div class="sourceLine" id="cb5-2" data-line-number="2">
<span class="st">  </span><span class="kw"><a href="http://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span>(<span class="dt">relig =</span> <span class="kw"><a href="../../reference/fct_lump.html">fct_lump</a></span>(relig, <span class="dt">n =</span> <span class="dv">5</span>)) <span class="op">%&gt;%</span><span class="st"> </span>
</div>
<div class="sourceLine" id="cb5-3" data-line-number="3">
<span class="st">  </span><span class="kw"><a href="http://dplyr.tidyverse.org/reference/tally.html">count</a></span>(relig)</div>
<div class="sourceLine" id="cb5-4" data-line-number="4"><span class="co">#&gt; # A tibble: 6 x 2</span></div>
<div class="sourceLine" id="cb5-5" data-line-number="5"><span class="co">#&gt;   relig          n</span></div>
<div class="sourceLine" id="cb5-6" data-line-number="6"><span class="co">#&gt;   &lt;fct&gt;      &lt;int&gt;</span></div>
<div class="sourceLine" id="cb5-7" data-line-number="7"><span class="co">#&gt; 1 Christian    689</span></div>
<div class="sourceLine" id="cb5-8" data-line-number="8"><span class="co">#&gt; 2 None        3523</span></div>
<div class="sourceLine" id="cb5-9" data-line-number="9"><span class="co">#&gt; 3 Jewish       388</span></div>
<div class="sourceLine" id="cb5-10" data-line-number="10"><span class="co">#&gt; 4 Catholic    5124</span></div>
<div class="sourceLine" id="cb5-11" data-line-number="11"><span class="co">#&gt; 5 Protestant 10846</span></div>
<div class="sourceLine" id="cb5-12" data-line-number="12"><span class="co">#&gt; 6 Other        913</span></div>
<div class="sourceLine" id="cb5-13" data-line-number="13"></div>
<div class="sourceLine" id="cb5-14" data-line-number="14">gss_cat <span class="op">%&gt;%</span><span class="st"> </span>
</div>
<div class="sourceLine" id="cb5-15" data-line-number="15">
<span class="st">  </span><span class="kw"><a href="http://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span>(<span class="dt">relig =</span> <span class="kw"><a href="../../reference/fct_lump.html">fct_lump</a></span>(relig, <span class="dt">prop =</span> <span class="fl">-0.10</span>)) <span class="op">%&gt;%</span><span class="st"> </span>
</div>
<div class="sourceLine" id="cb5-16" data-line-number="16">
<span class="st">  </span><span class="kw"><a href="http://dplyr.tidyverse.org/reference/tally.html">count</a></span>(relig)</div>
<div class="sourceLine" id="cb5-17" data-line-number="17"><span class="co">#&gt; # A tibble: 12 x 2</span></div>
<div class="sourceLine" id="cb5-18" data-line-number="18"><span class="co">#&gt;   relig                       n</span></div>
<div class="sourceLine" id="cb5-19" data-line-number="19"><span class="co">#&gt;   &lt;fct&gt;                   &lt;int&gt;</span></div>
<div class="sourceLine" id="cb5-20" data-line-number="20"><span class="co">#&gt; 1 No answer                  93</span></div>
<div class="sourceLine" id="cb5-21" data-line-number="21"><span class="co">#&gt; 2 Don't know                 15</span></div>
<div class="sourceLine" id="cb5-22" data-line-number="22"><span class="co">#&gt; 3 Inter-nondenominational   109</span></div>
<div class="sourceLine" id="cb5-23" data-line-number="23"><span class="co">#&gt; 4 Native american            23</span></div>
<div class="sourceLine" id="cb5-24" data-line-number="24"><span class="co">#&gt; 5 Christian                 689</span></div>
<div class="sourceLine" id="cb5-25" data-line-number="25"><span class="co">#&gt; 6 Orthodox-christian         95</span></div>
<div class="sourceLine" id="cb5-26" data-line-number="26"><span class="co">#&gt; # ... with 6 more rows</span></div></code></pre>
</div>
<div id="change-level-order" class="section level2">
<h2 class="hasAnchor">
<a href="#change-level-order" class="anchor"></a>Change level order</h2>
<p>There are four simple helpers for common operations:</p>
<ul>
<li><p><a href="https://hadley.github.io/forcats/fct_relevel.html"><code><a href="../../reference/fct_relevel.html">fct_relevel()</a></code></a> is similar to <code><a href="http://www.rdocumentation.org/packages/stats/topics/relevel">stats::relevel()</a></code> but allows you to move any number of levels to the front.</p></li>
<li><p><a href="https://hadley.github.io/forcats/fct_inorder.html"><code><a href="../../reference/fct_inorder.html">fct_inorder()</a></code></a> orders according to the first appearance of each level.</p></li>
<li><p><a href="https://hadley.github.io/forcats/fct_infreq.html"><code><a href="../../reference/fct_inorder.html">fct_infreq()</a></code></a> orders from most common to rarest.</p></li>
<li><p><a href="https://hadley.github.io/forcats/fct_rev.html"><code><a href="../../reference/fct_rev.html">fct_rev()</a></code></a> reverses the order of levels.</p></li>
</ul>
<p><a href="https://hadley.github.io/forcats/fct_reorder.html"><code><a href="../../reference/fct_reorder.html">fct_reorder()</a></code></a> and <code><a href="../../reference/fct_reorder.html">fct_reorder2()</a></code> are useful for visualisations. <code><a href="../../reference/fct_reorder.html">fct_reorder()</a></code> reorders the factor levels by another variable. This is useful when you map a categorical variable to position, as shown in the following example which shows the average number of hours spent watching television across religions.</p>
<pre class="sourceCode r" id="cb6"><code class="sourceCode r"><div class="sourceLine" id="cb6-1" data-line-number="1">relig &lt;-<span class="st"> </span>gss_cat <span class="op">%&gt;%</span>
</div>
<div class="sourceLine" id="cb6-2" data-line-number="2">
<span class="st">  </span><span class="kw"><a href="http://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span>(relig) <span class="op">%&gt;%</span>
</div>
<div class="sourceLine" id="cb6-3" data-line-number="3">
<span class="st">  </span><span class="kw"><a href="http://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span>(</div>
<div class="sourceLine" id="cb6-4" data-line-number="4">    <span class="dt">age =</span> <span class="kw">mean</span>(age, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>),</div>
<div class="sourceLine" id="cb6-5" data-line-number="5">    <span class="dt">tvhours =</span> <span class="kw">mean</span>(tvhours, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>),</div>
<div class="sourceLine" id="cb6-6" data-line-number="6">    <span class="dt">n =</span> <span class="kw"><a href="http://dplyr.tidyverse.org/reference/n.html">n</a></span>()</div>
<div class="sourceLine" id="cb6-7" data-line-number="7">  )</div>
<div class="sourceLine" id="cb6-8" data-line-number="8"></div>
<div class="sourceLine" id="cb6-9" data-line-number="9">
<span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/ggplot">ggplot</a></span>(relig, <span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/aes">aes</a></span>(tvhours, relig)) <span class="op">+</span><span class="st"> </span><span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/geom_point">geom_point</a></span>()</div>
<div class="sourceLine" id="cb6-10" data-line-number="10"></div>
<div class="sourceLine" id="cb6-11" data-line-number="11">
<span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/ggplot">ggplot</a></span>(relig, <span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/aes">aes</a></span>(tvhours, <span class="kw"><a href="../../reference/fct_reorder.html">fct_reorder</a></span>(relig, tvhours))) <span class="op">+</span>
</div>
<div class="sourceLine" id="cb6-12" data-line-number="12">
<span class="st">  </span><span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/geom_point">geom_point</a></span>()</div></code></pre>
<p><img src="forcats-0.1.0_files/figure-html/reorder-1.png" width="50%"><img src="forcats-0.1.0_files/figure-html/reorder-2.png" width="50%"></p>
<p><code><a href="../../reference/fct_reorder.html">fct_reorder2()</a></code> extends the same idea to plots where a factor is mapped to another aesthetic, like colour. The defaults are designed to make legends easier to read for line plots, as shown in the following example looking at marital status by age.</p>
<pre class="sourceCode r" id="cb7"><code class="sourceCode r"><div class="sourceLine" id="cb7-1" data-line-number="1">by_age &lt;-<span class="st"> </span>gss_cat <span class="op">%&gt;%</span>
</div>
<div class="sourceLine" id="cb7-2" data-line-number="2">
<span class="st">  </span><span class="kw"><a href="http://dplyr.tidyverse.org/reference/filter.html">filter</a></span>(<span class="op">!</span><span class="kw">is.na</span>(age)) <span class="op">%&gt;%</span>
</div>
<div class="sourceLine" id="cb7-3" data-line-number="3">
<span class="st">  </span><span class="kw"><a href="http://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span>(age, marital) <span class="op">%&gt;%</span>
</div>
<div class="sourceLine" id="cb7-4" data-line-number="4">
<span class="st">  </span><span class="kw"><a href="http://dplyr.tidyverse.org/reference/tally.html">count</a></span>() <span class="op">%&gt;%</span>
</div>
<div class="sourceLine" id="cb7-5" data-line-number="5">
<span class="st">  </span><span class="kw"><a href="http://dplyr.tidyverse.org/reference/group_by.html">ungroup</a></span>() <span class="op">%&gt;%</span><span class="st">  </span>
</div>
<div class="sourceLine" id="cb7-6" data-line-number="6">
<span class="st">  </span><span class="kw"><a href="http://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span>(<span class="dt">prop =</span> n <span class="op">/</span><span class="st"> </span><span class="kw">sum</span>(n))</div>
<div class="sourceLine" id="cb7-7" data-line-number="7"></div>
<div class="sourceLine" id="cb7-8" data-line-number="8">
<span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/ggplot">ggplot</a></span>(by_age, <span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/aes">aes</a></span>(age, prop)) <span class="op">+</span>
</div>
<div class="sourceLine" id="cb7-9" data-line-number="9">
<span class="st">  </span><span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/geom_path">geom_line</a></span>(<span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/aes">aes</a></span>(<span class="dt">colour =</span> marital))</div>
<div class="sourceLine" id="cb7-10" data-line-number="10"></div>
<div class="sourceLine" id="cb7-11" data-line-number="11">
<span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/ggplot">ggplot</a></span>(by_age, <span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/aes">aes</a></span>(age, prop)) <span class="op">+</span>
</div>
<div class="sourceLine" id="cb7-12" data-line-number="12">
<span class="st">  </span><span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/geom_path">geom_line</a></span>(<span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/aes">aes</a></span>(<span class="dt">colour =</span> <span class="kw"><a href="../../reference/fct_reorder.html">fct_reorder2</a></span>(marital, age, prop))) <span class="op">+</span>
</div>
<div class="sourceLine" id="cb7-13" data-line-number="13">
<span class="st">  </span><span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/labs">labs</a></span>(<span class="dt">colour =</span> <span class="st">"marital"</span>)</div></code></pre>
<p><img src="forcats-0.1.0_files/figure-html/reorder2-1.png" width="50%"><img src="forcats-0.1.0_files/figure-html/reorder2-2.png" width="50%"></p>
</div>
<div id="learning-more" class="section level2">
<h2 class="hasAnchor">
<a href="#learning-more" class="anchor"></a>Learning more</h2>
<p>You can learn more about forcats in <a href="http://r4ds.had.co.nz/factors.html">R for data science</a>, and on the <a href="http://forcats.tidyverse.org/">forcats website</a>.</p>
<p>Please <a href="https://github.com/hadley/forcats/issues">let me know</a> if you have other problems with factors that forcats doesn’t help with!</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#change-level-values">Change level values</a></li>
      <li><a href="#change-level-order">Change level order</a></li>
      <li><a href="#learning-more">Learning more</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="tidyverse">
  <p>forcats is a part of the <strong>tidyverse</strong>, an ecosystem of packages designed with common APIs and a shared philosophy. Learn more at <a href="http://tidyverse.org">tidyverse.org</a>.</p>
</div>

<div class="author">
  <p>Developed by <a href="http://hadley.nz">Hadley Wickham</a>, <a href="https://www.rstudio.com"><img src="http://tidyverse.org/rstudio-logo.svg" height="24"></a>.</p>
  <p>Site built by <a href="http://pkgdown.r-lib.org">pkgdown</a>.</p>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-67989-18', 'auto');
  ga('send', 'pageview');
</script></footer>
</div>

  </body>
</html>
