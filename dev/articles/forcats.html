<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Introduction to forcats • forcats</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png">
<link rel="icon" type="”image/svg+xml”" href="../favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
<link rel="icon" sizes="any" href="../favicon.ico">
<link rel="manifest" href="../site.webmanifest">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Source_Sans_Pro-0.4.10/font.css" rel="stylesheet">
<link href="../deps/Source_Code_Pro-0.4.10/font.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Introduction to forcats">
<meta name="robots" content="noindex">
<script defer data-domain="forcats.tidyverse.org,all.tidyverse.org" src="https://plausible.io/js/plausible.js"></script>
</head>
<body>
    <a href="#container" class="visually-hidden-focusable">Skip to content</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-none" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">forcats</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">1.0.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item"><a class="nav-link" href="../articles/forcats.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-news" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">News</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-news">
<li><h6 class="dropdown-header" data-toc-skip>Releases</h6></li>
    <li><a class="external-link dropdown-item" href="https://www.tidyverse.org/blog/2023/01/forcats-1-0-0/">Version 1.0.0</a></li>
    <li><a class="external-link dropdown-item" href="https://www.tidyverse.org/blog/2020/03/forcats-0-5-0/">Version 0.5.0</a></li>
    <li><a class="external-link dropdown-item" href="https://www.tidyverse.org/articles/2019/05/forcats-0-4-0/">Version 0.4.0</a></li>
    <li><a class="external-link dropdown-item" href="https://www.tidyverse.org/articles/2018/02/forcats-0-3-0/">Version 0.3.0</a></li>
    <li><a class="external-link dropdown-item" href="https://blog.rstudio.com/2017/04/12/tidyverse-updates/">Version 0.2.0</a></li>
    <li><a class="external-link dropdown-item" href="https://blog.rstudio.com/2016/08/31/forcats-0-1-0/">Version 0.1.0</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../news/index.html">Changelog</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/tidyverse/forcats/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article" id="container">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Introduction to forcats</h1>
                        <h4 data-toc-skip class="author">Emily
Robinson</h4>
            
      
      <small class="dont-index">Source: <a href="https://github.com/tidyverse/forcats/blob/main/vignettes/forcats.Rmd" class="external-link"><code>vignettes/forcats.Rmd</code></a></small>
      <div class="d-none name"><code>forcats.Rmd</code></div>
    </div>

    
    
<p>The goal of the forcats package is to provide a suite of useful tools
that solve common problems with factors. Factors are useful when you
have categorical data, variables that have a fixed and known set of
values, and when you want to display character vectors in
non-alphabetical order. If you want to learn more, the best place to
start is the <a href="https://r4ds.had.co.nz/factors.html" class="external-link">chapter on
factors</a> in R for Data Science.</p>
<div class="section level2">
<h2 id="ordering-by-frequency">Ordering by frequency<a class="anchor" aria-label="anchor" href="#ordering-by-frequency"></a>
</h2>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://forcats.tidyverse.org/">forcats</a></span><span class="op">)</span></span></code></pre></div>
<p>Let’s try answering the question, “what are the most common hair
colors of star wars characters?” Let’s start off by making a bar
plot:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">starwars</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>y <span class="op">=</span> <span class="va">hair_color</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html" class="external-link">geom_bar</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="forcats_files/figure-html/initial-plot-1.png" alt="A bar chart of hair color of starwars characters. The bars are alphabetically ordered, making it hard to see general patterns." width="700"></p>
<p>That’s okay, but it would be more helpful the graph was ordered by
count. This is a case of an <strong>unordered</strong> categorical
variable where we want it ordered by its frequency. To do so, we can use
the function <code><a href="../reference/fct_inorder.html">fct_infreq()</a></code>:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">starwars</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>y <span class="op">=</span> <span class="fu"><a href="../reference/fct_inorder.html">fct_infreq</a></span><span class="op">(</span><span class="va">hair_color</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html" class="external-link">geom_bar</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="forcats_files/figure-html/fct-infreq-hair-1.png" alt="The bar chart of hair color, now ordered so that the least frequent colours come first and the most frequent colors come last. This makes it easy to see that the most common hair color is none  (~35), followed by brown (~18), then black (~12). Surprisingly, NAs are at the top of the graph, even though there are ~5 NAs and  other colors have smaller values." width="700"></p>
<p>Note that <code><a href="../reference/fct_inorder.html">fct_infreq()</a></code> it automatically puts NA at the
top, even though that doesn’t have the smallest number of entries.</p>
<p>It’s a little surprising that the <code>NA</code> bar isn’t ordered
by frequency. To understand why we need to make a brief digression to
discuss <code>NA</code>s in values vs. <code>NA</code>s in levels</p>
</div>
<div class="section level2">
<h2 id="nas-in-levels-and-values">
<code>NA</code>s in levels and values<a class="anchor" aria-label="anchor" href="#nas-in-levels-and-values"></a>
</h2>
<p>There are two ways to represent a missing value in a factor:</p>
<ul>
<li>
<p>You can include it in the values of the factor; it does not
appear in the levels and <code><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na()</a></code> reports it as missing.
This is how missing values are encoded in a factor by default:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">f</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"x"</span>, <span class="st">"y"</span>, <span class="cn">NA</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/levels.html" class="external-link">levels</a></span><span class="op">(</span><span class="va">f</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "x" "y"</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">f</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] FALSE FALSE  TRUE</span></span></code></pre></div>
</li>
<li>
<p>You can include it in the levels of the factor and
<code><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na()</a></code> does not report it as missing. This requires a
little more work to create, because, by default, <code><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor()</a></code>
uses <code>exclude = NA</code>, meaning that missing values are not
included in the levels. You can force <code>NA</code> to be included by
setting <code>exclude = NULL</code>:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">f</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"x"</span>, <span class="st">"y"</span>, <span class="cn">NA</span><span class="op">)</span>, exclude <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/levels.html" class="external-link">levels</a></span><span class="op">(</span><span class="va">f</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "x" "y" NA</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">f</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] FALSE FALSE FALSE</span></span></code></pre></div>
</li>
</ul>
<p><code>NA</code>s in the values tend to be best for data analysis,
since <code><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na()</a></code> works as you’d expect. <code>NA</code>s in
the levels can be useful for display if you need to control where they
appear in a table or a plot.</p>
<p>To fix the issue above, we can use
<code><a href="../reference/fct_na_value_to_level.html">fct_na_value_to_level()</a></code> to convert the <code>NA</code> in
the value to an NA in the levels. Then they appear where you’d
expect:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">starwars</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>y <span class="op">=</span> <span class="fu"><a href="../reference/fct_inorder.html">fct_infreq</a></span><span class="op">(</span><span class="fu"><a href="../reference/fct_na_value_to_level.html">fct_na_value_to_level</a></span><span class="op">(</span><span class="va">hair_color</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html" class="external-link">geom_bar</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>y <span class="op">=</span> <span class="st">"Hair color"</span><span class="op">)</span></span></code></pre></div>
<p><img src="forcats_files/figure-html/unnamed-chunk-4-1.png" alt="The bar chart of hair color, now ordered so that NAs are  ordered where you'd expect: in between white (4) and black (12)." width="700"></p>
<p>(If you need the opposite operation, you can use
<code><a href="../reference/fct_na_value_to_level.html">fct_na_level_to_value()</a></code>.)</p>
</div>
<div class="section level2">
<h2 id="combining-levels">Combining levels<a class="anchor" aria-label="anchor" href="#combining-levels"></a>
</h2>
<p>Let’s take a look at skin color now:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">starwars</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html" class="external-link">count</a></span><span class="op">(</span><span class="va">skin_color</span>, sort <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 31 × 2</span></span></span>
<span><span class="co">#&gt;    skin_color     n</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> fair          17</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> light         11</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> dark           6</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> green          6</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> grey           6</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> pale           5</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> brown          4</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> blue           2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> blue, grey     2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> none           2</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 21 more rows</span></span></span></code></pre></div>
<p>We see that there’s 31 different skin colors - if we want to make a
plot this would be way too many to display! Let’s reduce it to only be
the top 5. We can use <code><a href="../reference/fct_lump.html">fct_lump()</a></code> to “lump” all the
infrequent colors into one factor, “other.” The argument <code>n</code>
is the number of levels we want to keep.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">starwars</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>skin_color <span class="op">=</span> <span class="fu"><a href="../reference/fct_lump.html">fct_lump</a></span><span class="op">(</span><span class="va">skin_color</span>, n <span class="op">=</span> <span class="fl">5</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html" class="external-link">count</a></span><span class="op">(</span><span class="va">skin_color</span>, sort <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 2</span></span></span>
<span><span class="co">#&gt;   skin_color     n</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> Other         41</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> fair          17</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> light         11</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> dark           6</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> green          6</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> grey           6</span></span></code></pre></div>
<p>We could also have used <code>prop</code> instead, which keeps all
the levels that appear at least <code>prop</code> of the time. For
example, let’s keep skin colors that at least 10% of the characters
have:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">starwars</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>skin_color <span class="op">=</span> <span class="fu"><a href="../reference/fct_lump.html">fct_lump</a></span><span class="op">(</span><span class="va">skin_color</span>, prop <span class="op">=</span> <span class="fl">.1</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html" class="external-link">count</a></span><span class="op">(</span><span class="va">skin_color</span>, sort <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 3 × 2</span></span></span>
<span><span class="co">#&gt;   skin_color     n</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> Other         59</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> fair          17</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> light         11</span></span></code></pre></div>
<p>Only light and fair remain; everything else is other.</p>
<p>If you wanted to call it something than “other”, you can change it
with the argument <code>other_level</code>:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">starwars</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>skin_color <span class="op">=</span> <span class="fu"><a href="../reference/fct_lump.html">fct_lump</a></span><span class="op">(</span><span class="va">skin_color</span>, prop <span class="op">=</span> <span class="fl">.1</span>, other_level <span class="op">=</span> <span class="st">"extra"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html" class="external-link">count</a></span><span class="op">(</span><span class="va">skin_color</span>, sort <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 3 × 2</span></span></span>
<span><span class="co">#&gt;   skin_color     n</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> extra         59</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> fair          17</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> light         11</span></span></code></pre></div>
<p>What if we wanted to see if the average mass differed by eye color?
We’ll only look at the 6 most popular eye colors and remove
<code>NA</code>s.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">avg_mass_eye_color</span> <span class="op">&lt;-</span> <span class="va">starwars</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>eye_color <span class="op">=</span> <span class="fu"><a href="../reference/fct_lump.html">fct_lump</a></span><span class="op">(</span><span class="va">eye_color</span>, n <span class="op">=</span> <span class="fl">6</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">eye_color</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span>mean_mass <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">mass</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">avg_mass_eye_color</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 7 × 2</span></span></span>
<span><span class="co">#&gt;   eye_color mean_mass</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> black          76.3</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> blue           86.5</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> brown          66.1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> orange        282. </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> red            81.4</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> yellow         81.1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">7</span> Other          68.4</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="ordering-by-another-variable">Ordering by another variable<a class="anchor" aria-label="anchor" href="#ordering-by-another-variable"></a>
</h2>
<p>It looks like people (or at least one person) with orange eyes are
definitely heavier! If we wanted to make a graph, it would be nice if it
was ordered by <code>mean_mass</code>. We can do this with
<code><a href="../reference/fct_reorder.html">fct_reorder()</a></code>, which reorders one variable by another.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">avg_mass_eye_color</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>eye_color <span class="op">=</span> <span class="fu"><a href="../reference/fct_reorder.html">fct_reorder</a></span><span class="op">(</span><span class="va">eye_color</span>, <span class="va">mean_mass</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">eye_color</span>, y <span class="op">=</span> <span class="va">mean_mass</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html" class="external-link">geom_col</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="forcats_files/figure-html/fct-reorder-1.png" alt="A column chart with eye color on the x-axis and mean mass on the  y-axis. The bars are ordered by mean_mass, so that the tallest bar (orange eye color with mean mass of ~275) is at the far right." width="700"></p>
</div>
<div class="section level2">
<h2 id="manually-reordering">Manually reordering<a class="anchor" aria-label="anchor" href="#manually-reordering"></a>
</h2>
<p>Let’s switch to using another dataset, <code>gss_cat</code>, the
general social survey. What is the income distribution among the
respondents?</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gss_cat</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html" class="external-link">count</a></span><span class="op">(</span><span class="va">rincome</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 16 × 2</span></span></span>
<span><span class="co">#&gt;    rincome            n</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> No answer        183</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> Don't know       267</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> Refused          975</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> $25000 or more  <span style="text-decoration: underline;">7</span>363</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> $20000 - 24999  <span style="text-decoration: underline;">1</span>283</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> $15000 - 19999  <span style="text-decoration: underline;">1</span>048</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> $10000 - 14999  <span style="text-decoration: underline;">1</span>168</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> $8000 to 9999    340</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> $7000 to 7999    188</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> $6000 to 6999    215</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">11</span> $5000 to 5999    227</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">12</span> $4000 to 4999    226</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">13</span> $3000 to 3999    276</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">14</span> $1000 to 2999    395</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">15</span> Lt $1000         286</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">16</span> Not applicable  <span style="text-decoration: underline;">7</span>043</span></span></code></pre></div>
<p>Notice that the income levels are in the correct order - they start
with the non-answers and then go from highest to lowest. This is the
same order you’d see if you plotted it as a bar chart. This is not a
coincidence. When you’re working with ordinal data, where there is an
order, you can have an ordered factor. You can examine them with the
base function <code><a href="https://rdrr.io/r/base/levels.html" class="external-link">levels()</a></code>, which prints them in order:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/levels.html" class="external-link">levels</a></span><span class="op">(</span><span class="va">gss_cat</span><span class="op">$</span><span class="va">rincome</span><span class="op">)</span></span>
<span><span class="co">#&gt;  [1] "No answer"      "Don't know"     "Refused"       </span></span>
<span><span class="co">#&gt;  [4] "$25000 or more" "$20000 - 24999" "$15000 - 19999"</span></span>
<span><span class="co">#&gt;  [7] "$10000 - 14999" "$8000 to 9999"  "$7000 to 7999" </span></span>
<span><span class="co">#&gt; [10] "$6000 to 6999"  "$5000 to 5999"  "$4000 to 4999" </span></span>
<span><span class="co">#&gt; [13] "$3000 to 3999"  "$1000 to 2999"  "Lt $1000"      </span></span>
<span><span class="co">#&gt; [16] "Not applicable"</span></span></code></pre></div>
<p>But what if your factor came in the wrong order? Let’s simulate that
by reordering the levels of <code>rincome</code> randomly with
<code><a href="../reference/fct_shuffle.html">fct_shuffle()</a></code>:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">reshuffled_income</span> <span class="op">&lt;-</span> <span class="va">gss_cat</span><span class="op">$</span><span class="va">rincome</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/fct_shuffle.html">fct_shuffle</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/levels.html" class="external-link">levels</a></span><span class="op">(</span><span class="va">reshuffled_income</span><span class="op">)</span></span>
<span><span class="co">#&gt;  [1] "$3000 to 3999"  "$10000 - 14999" "$4000 to 4999" </span></span>
<span><span class="co">#&gt;  [4] "$20000 - 24999" "$15000 - 19999" "$25000 or more"</span></span>
<span><span class="co">#&gt;  [7] "$1000 to 2999"  "$7000 to 7999"  "Not applicable"</span></span>
<span><span class="co">#&gt; [10] "$8000 to 9999"  "Lt $1000"       "Don't know"    </span></span>
<span><span class="co">#&gt; [13] "$6000 to 6999"  "Refused"        "No answer"     </span></span>
<span><span class="co">#&gt; [16] "$5000 to 5999"</span></span></code></pre></div>
<p>Now if we plotted it, it would show in this order, which is all over
the place! How can we fix this and put it in the right order?</p>
<p>We can use the function <code><a href="../reference/fct_relevel.html">fct_relevel()</a></code> when we need to
manually reorder our factor levels. In addition to the factor, you give
it a character vector of level names, and specify where you want to move
them. It defaults to moving them to the front, but you can move them
after another level with the argument <code>after</code>. If you want to
move it to the end, you set <code>after</code> equal to
<code>Inf</code>.</p>
<p>For example, let’s say we wanted to move <code>Lt $1000</code> and
<code>$1000 to 2999</code> to the front. We would write:</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/fct_relevel.html">fct_relevel</a></span><span class="op">(</span><span class="va">reshuffled_income</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Lt $1000"</span>, <span class="st">"$1000 to 2999"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/levels.html" class="external-link">levels</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt;  [1] "Lt $1000"       "$1000 to 2999"  "$3000 to 3999" </span></span>
<span><span class="co">#&gt;  [4] "$10000 - 14999" "$4000 to 4999"  "$20000 - 24999"</span></span>
<span><span class="co">#&gt;  [7] "$15000 - 19999" "$25000 or more" "$7000 to 7999" </span></span>
<span><span class="co">#&gt; [10] "Not applicable" "$8000 to 9999"  "Don't know"    </span></span>
<span><span class="co">#&gt; [13] "$6000 to 6999"  "Refused"        "No answer"     </span></span>
<span><span class="co">#&gt; [16] "$5000 to 5999"</span></span></code></pre></div>
<p>What if we want to move them to the second and third place?</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/fct_relevel.html">fct_relevel</a></span><span class="op">(</span><span class="va">reshuffled_income</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Lt $1000"</span>, <span class="st">"$1000 to 2999"</span><span class="op">)</span>, after <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/levels.html" class="external-link">levels</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt;  [1] "$3000 to 3999"  "Lt $1000"       "$1000 to 2999" </span></span>
<span><span class="co">#&gt;  [4] "$10000 - 14999" "$4000 to 4999"  "$20000 - 24999"</span></span>
<span><span class="co">#&gt;  [7] "$15000 - 19999" "$25000 or more" "$7000 to 7999" </span></span>
<span><span class="co">#&gt; [10] "Not applicable" "$8000 to 9999"  "Don't know"    </span></span>
<span><span class="co">#&gt; [13] "$6000 to 6999"  "Refused"        "No answer"     </span></span>
<span><span class="co">#&gt; [16] "$5000 to 5999"</span></span></code></pre></div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



   </div>
  <footer><div class="container">
  <div class="pkgdown-footer-left">
  <p>Developed by <a href="https://hadley.nz" class="external-link">Hadley Wickham</a>, <a href="https://www.posit.co" class="external-link"><img src="https://www.tidyverse.org/posit-logo.svg" alt="Posit" height="16" width="62" style="margin-bottom: 3px;"></a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

  </div></footer>
</body>
</html>
