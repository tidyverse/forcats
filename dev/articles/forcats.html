<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="forcats">
<title>Introduction to forcats • forcats</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><link href="../deps/Source_Sans_Pro-0.4.4/font.css" rel="stylesheet">
<link href="../deps/Source_Code_Pro-0.4.4/font.css" rel="stylesheet">
<!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Introduction to forcats">
<meta property="og:description" content="forcats">
<meta property="og:image" content="https://forcats.tidyverse.org/logo.png">
<meta name="robots" content="noindex">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><script defer data-domain="forcats.tidyverse.org,all.tidyverse.org" src="https://plausible.io/js/plausible.js"></script>
</head>
<body>
    <a href="#container" class="visually-hidden-focusable">Skip to content</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-none"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">forcats</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">0.5.2.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item">
  <a class="nav-link" href="../articles/forcats.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-news">News</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-news">
    <h6 class="dropdown-header" data-toc-skip>Releases</h6>
    <a class="external-link dropdown-item" href="https://www.tidyverse.org/blog/2020/03/forcats-0-5-0/">Version 0.5.0</a>
    <a class="external-link dropdown-item" href="https://www.tidyverse.org/articles/2019/05/forcats-0-4-0/">Version 0.4.0</a>
    <a class="external-link dropdown-item" href="https://www.tidyverse.org/articles/2018/02/forcats-0-3-0/">Version 0.3.0</a>
    <a class="external-link dropdown-item" href="https://blog.rstudio.com/2017/04/12/tidyverse-updates/">Version 0.2.0</a>
    <a class="external-link dropdown-item" href="https://blog.rstudio.com/2016/08/31/forcats-0-1-0/">Version 0.1.0</a>
    <div class="dropdown-divider"></div>
    <a class="dropdown-item" href="../news/index.html">Changelog</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/tidyverse/forcats/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article" id="container">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Introduction to forcats</h1>
                        <h4 data-toc-skip class="author">Emily
Robinson</h4>
            
      
      <small class="dont-index">Source: <a href="https://github.com/tidyverse/forcats/blob/HEAD/vignettes/forcats.Rmd" class="external-link"><code>vignettes/forcats.Rmd</code></a></small>
      <div class="d-none name"><code>forcats.Rmd</code></div>
    </div>

    
    
<p>The goal of the <strong>forcats</strong> package is to provide a
suite of useful tools that solve common problems with factors. Factors
are useful when you have categorical data, variables that have a fixed
and known set of values, and when you want to display character vectors
in non-alphabetical order. If you want to learn more, the best place to
start is the <a href="https://r4ds.had.co.nz/factors.html" class="external-link">chapter on
factors</a> in R for Data Science.</p>
<div class="section level2">
<h2 id="ordering-by-frequency">Ordering by frequency<a class="anchor" aria-label="anchor" href="#ordering-by-frequency"></a>
</h2>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://forcats.tidyverse.org/">forcats</a></span><span class="op">)</span></span></code></pre></div>
<p>Let’s try answering the question, “what are the most common hair
colors of star wars characters?” Let’s start off by making a bar
plot:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">starwars</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">hair_color</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html" class="external-link">geom_bar</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/coord_flip.html" class="external-link">coord_flip</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="forcats_files/figure-html/initial-plot-1.png" alt="A bar chart of hair color of starwars characters. The bars are alphabetically ordered, making it hard to see general patterns." width="700"></p>
<p>That’s okay, but it would be more helpful the graph was ordered by
count. This is a case of an <strong>unordered</strong> categorical
variable where we want it ordered by its frequency. To do so, we can use
the function <code><a href="../reference/fct_inorder.html">fct_infreq()</a></code>:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">starwars</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="../reference/fct_inorder.html">fct_infreq</a></span><span class="op">(</span><span class="va">hair_color</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html" class="external-link">geom_bar</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/coord_flip.html" class="external-link">coord_flip</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="forcats_files/figure-html/fct-infreq-hair-1.png" alt="The A bar chart of hair color, now ordered so that the least frequent colours come first and the most frequent colors come last. This makes it easy to see that the most common hair color is none (~35), followed by brown (~18), then black (~12)." width="700"></p>
<p>Note that <code><a href="../reference/fct_inorder.html">fct_infreq()</a></code> it automatically puts NA at the
top, even though that doesn’t have the smallest number of entries.</p>
</div>
<div class="section level2">
<h2 id="combining-levels">Combining levels<a class="anchor" aria-label="anchor" href="#combining-levels"></a>
</h2>
<p>Let’s take a look at skin color now:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">starwars</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html" class="external-link">count</a></span><span class="op">(</span><span class="va">skin_color</span>, sort <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 31 × 2</span></span></span>
<span><span class="co">#&gt;    skin_color     n</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> fair          17</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> light         11</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> dark           6</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> green          6</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> grey           6</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> pale           5</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> brown          4</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> blue           2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> blue, grey     2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> orange         2</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># … with 21 more rows</span></span></span></code></pre></div>
<p>We see that there’s 31 different skin colors - if we want to make a
plot this would be way too many to display! Let’s reduce it to only be
the top 5. We can use <code><a href="../reference/fct_lump.html">fct_lump()</a></code> to “lump” all the
infrequent colors into one factor, “other.” The argument <code>n</code>
is the number of levels we want to keep.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">starwars</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>skin_color <span class="op">=</span> <span class="fu"><a href="../reference/fct_lump.html">fct_lump</a></span><span class="op">(</span><span class="va">skin_color</span>, n <span class="op">=</span> <span class="fl">5</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html" class="external-link">count</a></span><span class="op">(</span><span class="va">skin_color</span>, sort <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 2</span></span></span>
<span><span class="co">#&gt;   skin_color     n</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> Other         41</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> fair          17</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> light         11</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> dark           6</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> green          6</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> grey           6</span></span></code></pre></div>
<p>We could also have used <code>prop</code> instead, which keeps all
the levels that appear at least <code>prop</code> of the time. For
example, let’s keep skin colors that at least 10% of the characters
have:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">starwars</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>skin_color <span class="op">=</span> <span class="fu"><a href="../reference/fct_lump.html">fct_lump</a></span><span class="op">(</span><span class="va">skin_color</span>, prop <span class="op">=</span> <span class="fl">.1</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html" class="external-link">count</a></span><span class="op">(</span><span class="va">skin_color</span>, sort <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 3 × 2</span></span></span>
<span><span class="co">#&gt;   skin_color     n</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> Other         59</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> fair          17</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> light         11</span></span></code></pre></div>
<p>Only light and fair remain; everything else is other.</p>
<p>If you wanted to call it something than “other”, you can change it
with the argument <code>other_level</code>:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">starwars</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>skin_color <span class="op">=</span> <span class="fu"><a href="../reference/fct_lump.html">fct_lump</a></span><span class="op">(</span><span class="va">skin_color</span>, prop <span class="op">=</span> <span class="fl">.1</span>, other_level <span class="op">=</span> <span class="st">"extra"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html" class="external-link">count</a></span><span class="op">(</span><span class="va">skin_color</span>, sort <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 3 × 2</span></span></span>
<span><span class="co">#&gt;   skin_color     n</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> extra         59</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> fair          17</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> light         11</span></span></code></pre></div>
<p>What if we wanted to see if the average mass differed by eye color?
We’ll only look at the 6 most popular eye colors and remove
<code>NA</code>s.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">avg_mass_eye_color</span> <span class="op">&lt;-</span> <span class="va">starwars</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>eye_color <span class="op">=</span> <span class="fu"><a href="../reference/fct_lump.html">fct_lump</a></span><span class="op">(</span><span class="va">eye_color</span>, n <span class="op">=</span> <span class="fl">6</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">eye_color</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span>mean_mass <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">mass</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">avg_mass_eye_color</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 7 × 2</span></span></span>
<span><span class="co">#&gt;   eye_color mean_mass</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> black          76.3</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> blue           86.5</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> brown          66.1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> orange        282. </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> red            81.4</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> yellow         81.1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">7</span> Other          68.4</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="ordering-by-another-variable">Ordering by another variable<a class="anchor" aria-label="anchor" href="#ordering-by-another-variable"></a>
</h2>
<p>It looks like people (or at least one person) with orange eyes are
definitely heavier! If we wanted to make a graph, it would be nice if it
was ordered by <code>mean_mass</code>. We can do this with
<code><a href="../reference/fct_reorder.html">fct_reorder()</a></code>, which reorders one variable by another.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">avg_mass_eye_color</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>eye_color <span class="op">=</span> <span class="fu"><a href="../reference/fct_reorder.html">fct_reorder</a></span><span class="op">(</span><span class="va">eye_color</span>, <span class="va">mean_mass</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">eye_color</span>, y <span class="op">=</span> <span class="va">mean_mass</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html" class="external-link">geom_col</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="forcats_files/figure-html/fct-reorder-1.png" alt="A column chart with eye color on the x-axis and mean mass on the y-axis. The bars are ordered by mean_mass, so that the tallest bar (orange eye color with mean mass of ~275) is at the far right." width="700"></p>
</div>
<div class="section level2">
<h2 id="manually-reordering">Manually reordering<a class="anchor" aria-label="anchor" href="#manually-reordering"></a>
</h2>
<p>Let’s switch to using another dataset, <code>gss_cat</code>, the
general social survey. What is the income distribution among the
respondents?</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gss_cat</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html" class="external-link">count</a></span><span class="op">(</span><span class="va">rincome</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 16 × 2</span></span></span>
<span><span class="co">#&gt;    rincome            n</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> No answer        183</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> Don't know       267</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> Refused          975</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> $25000 or more  <span style="text-decoration: underline;">7</span>363</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> $20000 - 24999  <span style="text-decoration: underline;">1</span>283</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> $15000 - 19999  <span style="text-decoration: underline;">1</span>048</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> $10000 - 14999  <span style="text-decoration: underline;">1</span>168</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> $8000 to 9999    340</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> $7000 to 7999    188</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> $6000 to 6999    215</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">11</span> $5000 to 5999    227</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">12</span> $4000 to 4999    226</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">13</span> $3000 to 3999    276</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">14</span> $1000 to 2999    395</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">15</span> Lt $1000         286</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">16</span> Not applicable  <span style="text-decoration: underline;">7</span>043</span></span></code></pre></div>
<p>Notice that the income levels are in the correct order - they start
with the non-answers and then go from highest to lowest. This is the
same order you’d see if you plotted it as a bar chart. This is not a
coincidence. When you’re working with ordinal data, where there is an
order, you can have an ordered factor. You can examine them with the
base function <code><a href="https://rdrr.io/r/base/levels.html" class="external-link">levels()</a></code>, which prints them in order:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/levels.html" class="external-link">levels</a></span><span class="op">(</span><span class="va">gss_cat</span><span class="op">$</span><span class="va">rincome</span><span class="op">)</span></span>
<span><span class="co">#&gt;  [1] "No answer"      "Don't know"     "Refused"        "$25000 or more"</span></span>
<span><span class="co">#&gt;  [5] "$20000 - 24999" "$15000 - 19999" "$10000 - 14999" "$8000 to 9999" </span></span>
<span><span class="co">#&gt;  [9] "$7000 to 7999"  "$6000 to 6999"  "$5000 to 5999"  "$4000 to 4999" </span></span>
<span><span class="co">#&gt; [13] "$3000 to 3999"  "$1000 to 2999"  "Lt $1000"       "Not applicable"</span></span></code></pre></div>
<p>But what if your factor came in the wrong order? Let’s simulate that
by reordering the levels of <code>rincome</code> randomly with
<code><a href="../reference/fct_shuffle.html">fct_shuffle()</a></code>:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">reshuffled_income</span> <span class="op">&lt;-</span> <span class="va">gss_cat</span><span class="op">$</span><span class="va">rincome</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/fct_shuffle.html">fct_shuffle</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/levels.html" class="external-link">levels</a></span><span class="op">(</span><span class="va">reshuffled_income</span><span class="op">)</span></span>
<span><span class="co">#&gt;  [1] "$20000 - 24999" "$7000 to 7999"  "$5000 to 5999"  "$8000 to 9999" </span></span>
<span><span class="co">#&gt;  [5] "$3000 to 3999"  "$15000 - 19999" "$4000 to 4999"  "$1000 to 2999" </span></span>
<span><span class="co">#&gt;  [9] "No answer"      "Lt $1000"       "$10000 - 14999" "Don't know"    </span></span>
<span><span class="co">#&gt; [13] "$6000 to 6999"  "Refused"        "Not applicable" "$25000 or more"</span></span></code></pre></div>
<p>Now if we plotted it, it would show in this order, which is all over
the place! How can we fix this and put it in the right order?</p>
<p>We can use the function <code><a href="../reference/fct_relevel.html">fct_relevel()</a></code> when we need to
manually reorder our factor levels. In addition to the factor, you give
it a character vector of level names, and specify where you want to move
them. It defaults to moving them to the front, but you can move them
after another level with the argument <code>after</code>. If you want to
move it to the end, you set <code>after</code> equal to
<code>Inf</code>.</p>
<p>For example, let’s say we wanted to move <code>Lt $1000</code> and
<code>$1000 to 2999</code> to the front. We would write:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/fct_relevel.html">fct_relevel</a></span><span class="op">(</span><span class="va">reshuffled_income</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Lt $1000"</span>, <span class="st">"$1000 to 2999"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/levels.html" class="external-link">levels</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt;  [1] "Lt $1000"       "$1000 to 2999"  "$20000 - 24999" "$7000 to 7999" </span></span>
<span><span class="co">#&gt;  [5] "$5000 to 5999"  "$8000 to 9999"  "$3000 to 3999"  "$15000 - 19999"</span></span>
<span><span class="co">#&gt;  [9] "$4000 to 4999"  "No answer"      "$10000 - 14999" "Don't know"    </span></span>
<span><span class="co">#&gt; [13] "$6000 to 6999"  "Refused"        "Not applicable" "$25000 or more"</span></span></code></pre></div>
<p>What if we want to move them to the second and third place?</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/fct_relevel.html">fct_relevel</a></span><span class="op">(</span><span class="va">reshuffled_income</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Lt $1000"</span>, <span class="st">"$1000 to 2999"</span><span class="op">)</span>, after <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/levels.html" class="external-link">levels</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt;  [1] "$20000 - 24999" "Lt $1000"       "$1000 to 2999"  "$7000 to 7999" </span></span>
<span><span class="co">#&gt;  [5] "$5000 to 5999"  "$8000 to 9999"  "$3000 to 3999"  "$15000 - 19999"</span></span>
<span><span class="co">#&gt;  [9] "$4000 to 4999"  "No answer"      "$10000 - 14999" "Don't know"    </span></span>
<span><span class="co">#&gt; [13] "$6000 to 6999"  "Refused"        "Not applicable" "$25000 or more"</span></span></code></pre></div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



   </div>
  <footer><div class="container">
  <div class="pkgdown-footer-left">
  <p></p>
<p>Developed by <a href="http://hadley.nz" class="external-link">Hadley Wickham</a>, <a href="https://www.rstudio.com" class="external-link"><img src="https://www.tidyverse.org/rstudio-logo.svg" alt="RStudio" width="72"></a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

  </div></footer>
</body>
</html>
